{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\basti\\\\Documents\\\\MyDigitalSchool\\\\React\\\\MDS-B3-2023-Food-Delivery\\\\frontend\\\\src\\\\contexts\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/React.createContext();\nconst actionTypes = {\n  ADD_TO_CART: 'ADD_TO_CART',\n  REMOVE_FROM_CART: 'REMOVE_FROM_CART',\n  RESET: 'RESET'\n};\nconst initialState = {\n  items: [],\n  // [{ item:{}, qty:x }]\n  total: 0\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case actionTypes.ADD_TO_CART:\n      return {\n        ...state,\n        // On verrifie qi le panier contient déjè l'items\n        items: state.items.some(cartItem => cartItem.item.id === action.data.item.id)\n        // On boucle sur les items pour trouver celui déjà présent\n        ? state.items.map(cartItem => {\n          if (cartItem.item.id === action.data.item.id) {\n            // On augmente la quantité\n            cartItem.qty++;\n          }\n          return cartItem;\n        }) : state.items.concat([{\n          item: action.data.item,\n          qty: 1\n        }]) // Item = plat\n      };\n\n    default:\n      throw new Error(`Unhandbled action type ${action.type}`);\n  }\n};\nconst cartFactory = dispatch => ({\n  addToCart: item => {\n    dispatch({\n      type: actionTypes.ADD_TO_CART,\n      data: {\n        item\n      }\n    });\n  }\n});\nconst CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n      value: {\n        state,\n        ...cartFactory(dispatch)\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(CartProvider, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n_c = CartProvider;\nconst useCart = () => {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used inside a CartProvider');\n  }\n  return context;\n};\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport { CartProvider, useCart };\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useContext","useReducer","CartContext","createContext","actionTypes","ADD_TO_CART","REMOVE_FROM_CART","RESET","initialState","items","total","cartReducer","state","action","type","some","cartItem","item","id","data","map","qty","concat","Error","cartFactory","dispatch","addToCart","CartProvider","children","useCart","context"],"sources":["C:/Users/basti/Documents/MyDigitalSchool/React/MDS-B3-2023-Food-Delivery/frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { useContext, useReducer } from 'react'\r\n\r\nconst CartContext = React.createContext()\r\n\r\nconst actionTypes = {\r\n  ADD_TO_CART: 'ADD_TO_CART',\r\n  REMOVE_FROM_CART: 'REMOVE_FROM_CART',\r\n  RESET: 'RESET'\r\n}\r\n\r\nconst initialState = {\r\n  items: [], // [{ item:{}, qty:x }]\r\n  total: 0\r\n}\r\n\r\nconst cartReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.ADD_TO_CART:\r\n      return {\r\n        ...state,\r\n        // On verrifie qi le panier contient déjè l'items\r\n        items: state.items.some(cartItem => cartItem.item.id === action.data.item.id)\r\n        // On boucle sur les items pour trouver celui déjà présent\r\n          ? state.items.map(cartItem => {\r\n            if (cartItem.item.id === action.data.item.id) {\r\n              // On augmente la quantité\r\n              cartItem.qty++\r\n            }\r\n            return cartItem\r\n          })\r\n          : state.items.concat([{ item: action.data.item, qty: 1 }]) // Item = plat\r\n\r\n      }\r\n    default:\r\n      throw new Error(`Unhandbled action type ${action.type}`)\r\n  }\r\n}\r\nconst cartFactory = (dispatch) => ({\r\n  addToCart: (item) => {\r\n    dispatch({\r\n      type: actionTypes.ADD_TO_CART,\r\n      data: { item }\r\n    })\r\n  }\r\n})\r\nconst CartProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(cartReducer, initialState)\r\n  return (\r\n    <>\r\n      <CartContext.Provider value={{ state, ...cartFactory(dispatch) }}>\r\n        {children}\r\n      </CartContext.Provider>\r\n    </>\r\n  )\r\n}\r\nconst useCart = () => {\r\n  const context = useContext(CartContext)\r\n  if (!context) {\r\n    throw new Error('useCart must be used inside a CartProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport {\r\n  CartProvider,\r\n  useCart\r\n\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,UAAU,QAAQ,OAAO;AAAA;AAAA;AAErD,MAAMC,WAAW,gBAAGH,KAAK,CAACI,aAAa,EAAE;AAEzC,MAAMC,WAAW,GAAG;EAClBC,WAAW,EAAE,aAAa;EAC1BC,gBAAgB,EAAE,kBAAkB;EACpCC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,EAAE;EAAE;EACXC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,WAAW,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACrC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKV,WAAW,CAACC,WAAW;MAC1B,OAAO;QACL,GAAGO,KAAK;QACR;QACAH,KAAK,EAAEG,KAAK,CAACH,KAAK,CAACM,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACM,IAAI,CAACF,IAAI,CAACC,EAAE;QAC5E;QAAA,EACIN,KAAK,CAACH,KAAK,CAACW,GAAG,CAACJ,QAAQ,IAAI;UAC5B,IAAIA,QAAQ,CAACC,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACM,IAAI,CAACF,IAAI,CAACC,EAAE,EAAE;YAC5C;YACAF,QAAQ,CAACK,GAAG,EAAE;UAChB;UACA,OAAOL,QAAQ;QACjB,CAAC,CAAC,GACAJ,KAAK,CAACH,KAAK,CAACa,MAAM,CAAC,CAAC;UAAEL,IAAI,EAAEJ,MAAM,CAACM,IAAI,CAACF,IAAI;UAAEI,GAAG,EAAE;QAAE,CAAC,CAAC,CAAC,CAAC;MAE/D,CAAC;;IACH;MACE,MAAM,IAAIE,KAAK,CAAE,0BAAyBV,MAAM,CAACC,IAAK,EAAC,CAAC;EAAA;AAE9D,CAAC;AACD,MAAMU,WAAW,GAAIC,QAAQ,KAAM;EACjCC,SAAS,EAAGT,IAAI,IAAK;IACnBQ,QAAQ,CAAC;MACPX,IAAI,EAAEV,WAAW,CAACC,WAAW;MAC7Bc,IAAI,EAAE;QAAEF;MAAK;IACf,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AACF,MAAMU,YAAY,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAChC,MAAM,CAAChB,KAAK,EAAEa,QAAQ,CAAC,GAAGxB,UAAU,CAACU,WAAW,EAAEH,YAAY,CAAC;EAC/D,oBACE;IAAA,uBACE,QAAC,WAAW,CAAC,QAAQ;MAAC,KAAK,EAAE;QAAEI,KAAK;QAAE,GAAGY,WAAW,CAACC,QAAQ;MAAE,CAAE;MAAA,UAC9DG;IAAQ;MAAA;MAAA;MAAA;IAAA;EACY,iBACtB;AAEP,CAAC;AAAA,GATKD,YAAY;AAAA,KAAZA,YAAY;AAUlB,MAAME,OAAO,GAAG,MAAM;EAAA;EACpB,MAAMC,OAAO,GAAG9B,UAAU,CAACE,WAAW,CAAC;EACvC,IAAI,CAAC4B,OAAO,EAAE;IACZ,MAAM,IAAIP,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACA,OAAOO,OAAO;AAChB,CAAC;AAAA,IANKD,OAAO;AAQb,SACEF,YAAY,EACZE,OAAO;AAER;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}